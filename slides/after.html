<script>
  let nb_iter = 0
  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowDown") {
      nb_iter++
    }
    if (e.key === "ArrowUp") {
      nb_iter = Math.max(nb_iter - 1, 0)
    }
    redraw()
  })
</script>

<script>
  let t = 0
  const mix = (a, b, f) => {
    return a * (1 - f) + b * f
  }
  function easeInOutQuad(x) {
    return x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2
  }
  const draw = () => {
    for (let y = -200; y < 200; y += 5) {
      const coef = easeInOutQuad(t)
      line([-100, +y], [mix(-100, 100 - y, coef), -100])
      line([100, +y], [mix(100, -y + 50, coef), 100])
      line([-100, -2 * y], [mix(-100, -y, coef), +100])
      line([mix(100, +100, coef), +y], [mix(100, +y, coef), -100])
    }
    if (t < 1) {
      t += 0.005
      setTimeout(redraw, 10)
    }
  }
</script>

<script src="./magic/includes.js"></script>
