<script>
  let nb_iter = 0
  let symmetry = false
  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowDown") {
      nb_iter = Math.min(nb_iter + 1, 5)
    }
    if (e.key === "ArrowUp") {
      nb_iter = Math.max(nb_iter - 1, 0)
    }
    if (e.key === " ") {
      symmetry = !symmetry
    }
    redraw()
  })
</script>

<script>
  const ligne_droite = (longeur, N) => {
    if (N > 0) {
      ligne_droite(longeur / 3, N - 1)
      turn(60)
      ligne_droite(longeur / 3, N - 1)
      turn(-120)
      ligne_droite(longeur / 3, N - 1)
      turn(60)
      ligne_droite(longeur / 3, N - 1)
    } else {
      forward(longeur)
    }
  }
  const snowflake_side = () => {
    ligne_droite(180, nb_iter)
  }
  const draw = () => {
    set_position([-90, 0])
    set_orientation(0)
    snowflake_side()
    if (symmetry) {
      set_position([90, 0])
      set_orientation(180)
      snowflake_side()
    }
  }
</script>

<script src="./magic/includes.js"></script>
